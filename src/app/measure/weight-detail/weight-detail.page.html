<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <!-- Volver a la tab de Measure -->
      <ion-back-button defaultHref="/tabs/measure"></ion-back-button>
    </ion-buttons>
    <ion-title>Weight</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Título grande al hacer scroll -->
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Weight</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- HISTORIAL -->
  <ion-list>
    <ion-list-header>
      <ion-label>
        <h2>Weight history</h2>
        <p>Latest measurements first</p>
      </ion-label>
    </ion-list-header>

    <!-- Lista de registros -->
    <ion-item *ngFor="let m of items; trackBy: trackById">
      <ion-label>
        <h3>{{ m.value }} {{ m.unit || 'kg' }}</h3>
        <p>{{ m.dateISO | date: 'short' }}</p>
      </ion-label>
    </ion-item>

    <!-- Mensaje cuando no hay registros -->
    <ion-item *ngIf="items.length === 0">
      <ion-label>
        No weight records yet. Add your first measurement below.
      </ion-label>
    </ion-item>
  </ion-list>

  <!-- ALTA DE NUEVA MEDICIÓN -->
  <ion-list>
    <ion-list-header>
      <ion-label>
        <h2>Add new weight</h2>
      </ion-label>
    </ion-list-header>

    <ion-item>
      <ion-label position="stacked">Weight (kg)</ion-label>
      <ion-input
        type="number"
        inputmode="decimal"
        [(ngModel)]="newValue"
        placeholder="e.g. 89.8"
      ></ion-input>
    </ion-item>

    <div class="actions">
      <ion-button
        expand="block"
        (click)="addEntry()"
        [disabled]="isSaving || newValue == null"
      >
        Save
      </ion-button>
    </div>
  </ion-list>
</ion-content>
